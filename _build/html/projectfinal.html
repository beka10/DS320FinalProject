

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Now We are start working on the KAGGLE.COM dataset &#8212; Data Visualization Project  documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Data Visualization Project  documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/projectfinal.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># to import libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># to read the file</span>

<span class="c1"># gunv is the dataset which we parsed from gun violence archives. We included python file</span>
<span class="c1"># with code that exracts and cleans data from gunviolence https://www.gunviolencearchive.org.</span>
<span class="c1"># datas is the dataset which we downloaded from kaggle.com</span>
<span class="n">gunv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;gunviolence.csv&#39;</span><span class="p">)</span>
<span class="n">datas</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;violenceG.csv&quot;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># this will give us the first five rows of the data which</span>
<span class="c1"># we parsed from https://www.gunviolencearchive.org</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>Total Number of Incidents</th>
      <th>Number of Deaths</th>
      <th>Number of Injuries</th>
      <th>Number of Children</th>
      <th>Number of Teens</th>
      <th>Mass Shooting</th>
      <th>Officer Involved Incident</th>
      <th>Home Invasion</th>
      <th>Defensive Use</th>
      <th>Unintentional Shooting</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Alabama</td>
      <td>6,118</td>
      <td>2,137</td>
      <td>3,498</td>
      <td>110</td>
      <td>303</td>
      <td>41</td>
      <td>190</td>
      <td>245</td>
      <td>262</td>
      <td>217</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Alaska</td>
      <td>1,514</td>
      <td>300</td>
      <td>365</td>
      <td>20</td>
      <td>36</td>
      <td>1</td>
      <td>42</td>
      <td>78</td>
      <td>66</td>
      <td>71</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Arizona</td>
      <td>2,618</td>
      <td>1,263</td>
      <td>1,260</td>
      <td>46</td>
      <td>135</td>
      <td>18</td>
      <td>340</td>
      <td>127</td>
      <td>154</td>
      <td>150</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Arkansas</td>
      <td>3,298</td>
      <td>900</td>
      <td>1,572</td>
      <td>43</td>
      <td>157</td>
      <td>16</td>
      <td>106</td>
      <td>142</td>
      <td>113</td>
      <td>134</td>
    </tr>
    <tr>
      <th>4</th>
      <td>California</td>
      <td>18,448</td>
      <td>6,348</td>
      <td>8,688</td>
      <td>186</td>
      <td>862</td>
      <td>185</td>
      <td>1,291</td>
      <td>545</td>
      <td>450</td>
      <td>460</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#first we will start by looking at the description of the two datsets</span>
<span class="c1">#by looking at different functions like describe, shape and size</span>
<span class="c1">#to have an idea about the size and values of the two datasets</span>
<span class="n">columns</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">columns</span>
<span class="n">columns1</span><span class="o">=</span><span class="n">datas</span><span class="o">.</span><span class="n">columns</span>
<span class="n">columns</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[4]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Index([&#39;State&#39;, &#39;Total Number of Incidents&#39;, &#39;Number of Deaths&#39;,
       &#39;Number of Injuries&#39;, &#39;Number of Children &#39;, &#39;Number of Teens&#39;,
       &#39;Mass Shooting&#39;, &#39;Officer Involved Incident&#39;, &#39;Home Invasion&#39;,
       &#39;Defensive Use&#39;, &#39;Unintentional Shooting&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># data type of our dataset</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">get_dtype_counts</span><span class="p">()</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[5]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>int64     5
object    6
dtype: int64
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#length of dataset created by us</span>
<span class="n">len_datas</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">datas</span><span class="p">)</span>
<span class="n">len_gunv</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gunv</span><span class="p">)</span>
<span class="n">len_gunv</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>50
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># shape of the dataset, this shows numbers of rows and columns</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>(50, 11)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># size of the dataset</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>550
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># it gives the brief information about the dataset</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Number of Children</th>
      <th>Mass Shooting</th>
      <th>Home Invasion</th>
      <th>Defensive Use</th>
      <th>Unintentional Shooting</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>50.000000</td>
      <td>50.000000</td>
      <td>50.000000</td>
      <td>50.0000</td>
      <td>50.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>64.000000</td>
      <td>33.260000</td>
      <td>240.460000</td>
      <td>172.8000</td>
      <td>183.980000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>66.936156</td>
      <td>41.174001</td>
      <td>206.437638</td>
      <td>175.3044</td>
      <td>146.687435</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>6.000000</td>
      <td>9.0000</td>
      <td>8.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>15.500000</td>
      <td>4.000000</td>
      <td>82.500000</td>
      <td>47.5000</td>
      <td>73.500000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>42.000000</td>
      <td>16.500000</td>
      <td>142.000000</td>
      <td>120.0000</td>
      <td>142.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>102.750000</td>
      <td>48.500000</td>
      <td>363.000000</td>
      <td>255.0000</td>
      <td>257.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>298.000000</td>
      <td>185.000000</td>
      <td>883.000000</td>
      <td>862.0000</td>
      <td>666.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># information about dataset</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 11 columns):
State                        50 non-null object
Total Number of Incidents    50 non-null object
Number of Deaths             50 non-null object
Number of Injuries           50 non-null object
Number of Children           50 non-null int64
Number of Teens              50 non-null object
Mass Shooting                50 non-null int64
Officer Involved Incident    50 non-null object
Home Invasion                50 non-null int64
Defensive Use                50 non-null int64
Unintentional Shooting       50 non-null int64
dtypes: int64(5), object(6)
memory usage: 4.4+ KB
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># we replacing the space in the column names with underscore to make it easier to use</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># We convert the columns that are represented as object to float</span>
<span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;total_number_of_incidents&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">total_number_of_incidents</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;number_of_deaths&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">number_of_deaths</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;number_of_injuries&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">number_of_injuries</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;number_of_teens&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">number_of_teens</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;officer_involved_incident&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">officer_involved_incident</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># We double check the type of columns, we can see that they have been changed to float</span>
<span class="n">gunv</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 11 columns):
state                        50 non-null object
total_number_of_incidents    50 non-null float64
number_of_deaths             50 non-null float64
number_of_injuries           50 non-null float64
number_of_children           50 non-null int64
number_of_teens              50 non-null float64
mass_shooting                50 non-null int64
officer_involved_incident    50 non-null float64
home_invasion                50 non-null int64
defensive_use                50 non-null int64
unintentional_shooting       50 non-null int64
dtypes: float64(5), int64(5), object(1)
memory usage: 4.4+ KB
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="c1">#This plot shows the correlations between the all the colums, represented in colors</span>
<span class="c1">#the brightest colors have the best correlations between the columns</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;int64&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[14]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x10c229ba8&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_13_1.png" src="_images/projectfinal_13_1.png" />
</div>
</div>
<p>The following plots show the correlations between the coloumns,
represented in scatter plots,from which we can see the correlation
between each two columns in our dataset There are intresting
correlations in our datastarting by the correlatuions with total number
of incidents, which seem to have positive correlation with almost all
the other variables particularly number of deaths, injuries, mass
shooting and unintentional shooting. This show that in most of our data
there is relationship between the number of incidents that occurred in
each state with the other variables being important factor of those
incidents. Then, the number of injuries and deaths also have positive
linear correlations with mass shooting, home invasion and uningentional
shooting. Which also makes sense when we talk about gun violence all
those factors are related. Mass shooting is also intresting variable as
it has positive linear relationship with total number of incidents,
inturies and death this happen because the increase in mass shooting
will incease those variables there are other noticeable linear
relationshps such as the rekationship between home invasions and
unintentional shooting, which means that one of the reasons of
unintentional shooting is the invasion of houses where people tend to
react by shooting the people who try enter their houses ilegally. Also,
there is i tresting positive linear relationship between officers
involved in incidents and mass shooting, which means that the more
involvement of the plice thre tend tobe more mass shooting. In general,
we tried to show that this dataset variables have a lot of poaitive
correlations that can explain some of the main reasons of gun violence
in the united states.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;total_number_of_incidents&#39;</span><span class="p">,</span><span class="s1">&#39;number_of_deaths&#39;</span><span class="p">,</span><span class="s1">&#39;number_of_injuries&#39;</span><span class="p">,</span>
         <span class="s1">&#39;mass_shooting&#39;</span><span class="p">,</span><span class="s1">&#39;officer_involved_incident&#39;</span><span class="p">,</span><span class="s1">&#39;home_invasion&#39;</span><span class="p">,</span> <span class="s1">&#39;defensive_use&#39;</span><span class="p">,</span><span class="s1">&#39;unintentional_shooting&#39;</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">gunv</span><span class="p">[</span><span class="n">cols</span><span class="p">],</span> <span class="n">size</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_15_0.png" src="_images/projectfinal_15_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#this plot shows the total number of incidents per state, As we can see</span>
<span class="c1">#the top states are Illinois, California, Florida and Texas.</span>
<span class="n">df3</span><span class="o">=</span><span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;total_number_of_incidents&#39;</span><span class="p">:[</span><span class="s1">&#39;sum&#39;</span><span class="p">]})</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;winter&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_16_0.png" src="_images/projectfinal_16_0.png" />
</div>
</div>
<p>This plot shows the total number of deaths per state, As we can see the
top states are California, Florida,Texas and Illinois.The same states in
the previous plot but not in the same order. this indicate that there is
tren here where those states have more shootings and incidents</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="n">df3</span><span class="o">=</span><span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;number_of_deaths&#39;</span><span class="p">:[</span><span class="s1">&#39;sum&#39;</span><span class="p">]})</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;autumn&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_18_0.png" src="_images/projectfinal_18_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#this time we tried to plot two graphs, which are the top states by deaths</span>
<span class="c1">#and top staes by injuries, to compare them. From the two plots we can see</span>
<span class="c1">#that the same previous four states are showing again.</span>
<span class="n">state_kill</span>   <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">)[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">state_injury</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">)[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span>
                 <span class="n">data</span><span class="o">=</span><span class="n">state_kill</span><span class="p">[:</span><span class="mi">15</span><span class="p">],</span><span class="n">palette</span><span class="o">=</span><span class="s2">&quot;husl&quot;</span><span class="p">,</span>
                 <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">edgecolor</span> <span class="o">=</span> <span class="s2">&quot;k&quot;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;STATE&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;KILLED&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;TOP STATES BY DEATHS DUE TO VIOLENCE&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">state_kill</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">]):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span> <span class="o">.</span><span class="mi">3</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span>
                 <span class="n">data</span><span class="o">=</span><span class="n">state_injury</span><span class="p">[:</span><span class="mi">15</span><span class="p">],</span><span class="n">palette</span><span class="o">=</span><span class="s2">&quot;husl&quot;</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">edgecolor</span> <span class="o">=</span> <span class="s2">&quot;k&quot;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;INJURED&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=.</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;TOP STATES BY INJURIES DUE TO VIOLENCE&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">state_injury</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">]):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span> <span class="o">.</span><span class="mi">3</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_19_0.png" src="_images/projectfinal_19_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#here we plot casualities per state</span>
<span class="c1">#casualities is the sum of number of deaths and number of injuries</span>
<span class="c1">#And  Again the top states are Illinois,California, Texas and Florida.</span>
<span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;casualities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">]</span>
<span class="n">gunv</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;casualities&quot;</span> <span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;casualities&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span><span class="n">c</span><span class="o">=</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span>
            <span class="n">s</span><span class="o">=</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">]</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">edgecolor</span> <span class="o">=</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=.</span><span class="mi">7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25000</span><span class="p">,</span><span class="mi">2500</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;STATES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;CASUALITIES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="n">alpha</span><span class="o">=.</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;SIZES = INJURED ,COLOR = KILLED&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;********************************&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;CASUALITIES BY TOP 15 STATES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIZES = INJURED ,COLOR = KILLED
********************************
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_20_1.png" src="_images/projectfinal_20_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#in this plot we show the lowest 15 states with casualities</span>
<span class="c1">#those are the states that have less deaths and injuries</span>
<span class="c1">#frim gun violence. The lowest states are Wyoming, Vermont an Hawaii.</span>
<span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;casualities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">]</span>
<span class="n">gunv</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;casualities&quot;</span> <span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;casualities&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span><span class="n">c</span><span class="o">=</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">],</span>
            <span class="n">s</span><span class="o">=</span><span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">][:</span><span class="mi">15</span><span class="p">]</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">edgecolor</span> <span class="o">=</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=.</span><span class="mi">7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25000</span><span class="p">,</span><span class="mi">2500</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;STATES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;CASUALITIES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="n">alpha</span><span class="o">=.</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;SIZES = INJURED ,COLOR = KILLED&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;********************************&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;CASUALITIES BY TOP 15 STATES&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
SIZES = INJURED ,COLOR = KILLED
********************************
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_21_1.png" src="_images/projectfinal_21_1.png" />
</div>
</div>
<p>This plot shows home invasion per state. We can see that some trends
continue we still have Florida, Califorina and Texas in the top 4 sates
with home invasion, which indicate that home invasions might be
important reason of incidents, deaths and injuries from gun violence in
the United States. Also, We can see that Georgia is in the top 4 of home
invasions but it was not in the highest states with highest incidents
and deaths</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
<span class="n">g</span><span class="o">=</span><span class="n">grouped</span><span class="p">[</span><span class="s1">&#39;home_invasion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">),</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">plot3</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">g</span><span class="p">)</span>

<span class="n">plot3</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
<span class="n">plot3</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;States&#39;</span><span class="p">,</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="n">plot3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Home Invasion&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_23_0.png" src="_images/projectfinal_23_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#in this plot we look at the top 10 states of the overall violence</span>
<span class="c1">#overall vilence is the sum of number of deaths, injuries, incidents</span>
<span class="c1">#mass shooting, officers involved and unintentional shooting</span>
<span class="c1">#We can see that California, Texas, Florida and Illinois are still</span>
<span class="c1">#the top four states in overall violence.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;Total_Violence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;total_number_of_incidents&#39;</span><span class="p">]</span> <span class="o">+</span><span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;mass_shooting&#39;</span><span class="p">]</span><span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;officer_involved_incident&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;home_invasion&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;unintentional_shooting&#39;</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total_Violence&#39;</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">pub</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;cool&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">pub</span> <span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Total_Violence&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Total Violence&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Top 10 states by overall violence&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">pub</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;Figure size 1296x864 with 0 Axes&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_24_1.png" src="_images/projectfinal_24_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#We do the same plot as above but with the lowest 10 states</span>
<span class="c1">#we can see that the same states are appearing again</span>
<span class="c1">#the states of Hawaii, Wyoming and Vermont are the lowest</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;Total_Violence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;number_of_injuries&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;total_number_of_incidents&#39;</span><span class="p">]</span> <span class="o">+</span><span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;mass_shooting&#39;</span><span class="p">]</span><span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;officer_involved_incident&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;home_invasion&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;unintentional_shooting&#39;</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total_Violence&#39;</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">pub</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;gist_earth&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">pub</span> <span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Total_Violence&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Total Violence&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Top 10 states by overall violence&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">pub</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;Figure size 1296x864 with 0 Axes&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_25_1.png" src="_images/projectfinal_25_1.png" />
</div>
</div>
<p>This plot shows the number of teneegars involved in gun violence per
state the teenagers here are under the age of 17 As we can see from the
plot below Illinois has the highest number of teenagers involved in gun
violence followed by Florida, California and Texasthose are the same 4
highest states for incidents and deaths from gun violence this prove
that Today’s children and teenagers are more prone to violence</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">children</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">gunv</span><span class="p">[</span><span class="s2">&quot;ChildrenViolence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;number_of_children&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gunv</span><span class="p">[</span><span class="s1">&#39;number_of_teens&#39;</span><span class="p">]</span>
<span class="n">data123</span> <span class="o">=</span> <span class="n">gunv</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;state&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;ChildrenViolence&#39;</span><span class="p">]</span>
<span class="n">data123</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data123</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span>
<span class="n">data123</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>

</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[24]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a14c94f98&gt;
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;Figure size 1296x864 with 0 Axes&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_27_2.png" src="_images/projectfinal_27_2.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#this plot shows the relationship between defensive use and unintentional shooting</span>
<span class="c1">#there is positive relationship so as the number as defensie use increase</span>
<span class="c1">#unintentional shooting will increase. This indicate that defensive use is one of</span>
<span class="c1">#the resons for unintentional shooting</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;unintentional_shooting&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;defensive_use&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">gunv</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_28_0.png" src="_images/projectfinal_28_0.png" />
</div>
</div>
<div class="section" id="Now-We-are-start-working-on-the-KAGGLE.COM-dataset">
<h1>Now We are start working on the KAGGLE.COM dataset<a class="headerlink" href="#Now-We-are-start-working-on-the-KAGGLE.COM-dataset" title="Permalink to this headline">¶</a></h1>
<p>This plot shows the relationship between mass shooting and total deaths
As we can see from the plot mostly as the mass shootings increase the
number of deaths will increase. According to the US Congressional
Research Service mass shooting is four or more shot and/or killed in a
single event (incident) this shows that mass shootings are incidents
with more people being killed or injured</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;mass_shooting&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;number_of_deaths&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">gunv</span><span class="p">)</span>
<span class="c1">#number_of_injuries</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_31_0.png" src="_images/projectfinal_31_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">datas</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;violenceG.csv&quot;</span><span class="p">)</span>
<span class="n">datas</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>incident_id</th>
      <th>date</th>
      <th>state</th>
      <th>city_or_county</th>
      <th>address</th>
      <th>n_killed</th>
      <th>n_injured</th>
      <th>incident_url</th>
      <th>source_url</th>
      <th>incident_url_fields_missing</th>
      <th>...</th>
      <th>participant_age</th>
      <th>participant_age_group</th>
      <th>participant_gender</th>
      <th>participant_name</th>
      <th>participant_relationship</th>
      <th>participant_status</th>
      <th>participant_type</th>
      <th>sources</th>
      <th>state_house_district</th>
      <th>state_senate_district</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>461105</td>
      <td>2013-01-01</td>
      <td>Pennsylvania</td>
      <td>Mckeesport</td>
      <td>1506 Versailles Avenue and Coursin Street</td>
      <td>0</td>
      <td>4</td>
      <td>http://www.gunviolencearchive.org/incident/461105</td>
      <td>http://www.post-gazette.com/local/south/2013/0...</td>
      <td>False</td>
      <td>...</td>
      <td>0::20</td>
      <td>0::Adult 18+||1::Adult 18+||2::Adult 18+||3::A...</td>
      <td>0::Male||1::Male||3::Male||4::Female</td>
      <td>0::Julian Sims</td>
      <td>NaN</td>
      <td>0::Arrested||1::Injured||2::Injured||3::Injure...</td>
      <td>0::Victim||1::Victim||2::Victim||3::Victim||4:...</td>
      <td>http://pittsburgh.cbslocal.com/2013/01/01/4-pe...</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>460726</td>
      <td>2013-01-01</td>
      <td>California</td>
      <td>Hawthorne</td>
      <td>13500 block of Cerise Avenue</td>
      <td>1</td>
      <td>3</td>
      <td>http://www.gunviolencearchive.org/incident/460726</td>
      <td>http://www.dailybulletin.com/article/zz/201301...</td>
      <td>False</td>
      <td>...</td>
      <td>0::20</td>
      <td>0::Adult 18+||1::Adult 18+||2::Adult 18+||3::A...</td>
      <td>0::Male</td>
      <td>0::Bernard Gillis</td>
      <td>NaN</td>
      <td>0::Killed||1::Injured||2::Injured||3::Injured</td>
      <td>0::Victim||1::Victim||2::Victim||3::Victim||4:...</td>
      <td>http://losangeles.cbslocal.com/2013/01/01/man-...</td>
      <td>62.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>478855</td>
      <td>2013-01-01</td>
      <td>Ohio</td>
      <td>Lorain</td>
      <td>1776 East 28th Street</td>
      <td>1</td>
      <td>3</td>
      <td>http://www.gunviolencearchive.org/incident/478855</td>
      <td>http://chronicle.northcoastnow.com/2013/02/14/...</td>
      <td>False</td>
      <td>...</td>
      <td>0::25||1::31||2::33||3::34||4::33</td>
      <td>0::Adult 18+||1::Adult 18+||2::Adult 18+||3::A...</td>
      <td>0::Male||1::Male||2::Male||3::Male||4::Male</td>
      <td>0::Damien Bell||1::Desmen Noble||2::Herman Sea...</td>
      <td>NaN</td>
      <td>0::Injured, Unharmed, Arrested||1::Unharmed, A...</td>
      <td>0::Subject-Suspect||1::Subject-Suspect||2::Vic...</td>
      <td>http://www.morningjournal.com/general-news/201...</td>
      <td>56.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>478925</td>
      <td>2013-01-05</td>
      <td>Colorado</td>
      <td>Aurora</td>
      <td>16000 block of East Ithaca Place</td>
      <td>4</td>
      <td>0</td>
      <td>http://www.gunviolencearchive.org/incident/478925</td>
      <td>http://www.dailydemocrat.com/20130106/aurora-s...</td>
      <td>False</td>
      <td>...</td>
      <td>0::29||1::33||2::56||3::33</td>
      <td>0::Adult 18+||1::Adult 18+||2::Adult 18+||3::A...</td>
      <td>0::Female||1::Male||2::Male||3::Male</td>
      <td>0::Stacie Philbrook||1::Christopher Ratliffe||...</td>
      <td>NaN</td>
      <td>0::Killed||1::Killed||2::Killed||3::Killed</td>
      <td>0::Victim||1::Victim||2::Victim||3::Subject-Su...</td>
      <td>http://denver.cbslocal.com/2013/01/06/officer-...</td>
      <td>40.0</td>
      <td>28.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>478959</td>
      <td>2013-01-07</td>
      <td>North Carolina</td>
      <td>Greensboro</td>
      <td>307 Mourning Dove Terrace</td>
      <td>2</td>
      <td>2</td>
      <td>http://www.gunviolencearchive.org/incident/478959</td>
      <td>http://www.journalnow.com/news/local/article_d...</td>
      <td>False</td>
      <td>...</td>
      <td>0::18||1::46||2::14||3::47</td>
      <td>0::Adult 18+||1::Adult 18+||2::Teen 12-17||3::...</td>
      <td>0::Female||1::Male||2::Male||3::Female</td>
      <td>0::Danielle Imani Jameison||1::Maurice Eugene ...</td>
      <td>3::Family</td>
      <td>0::Injured||1::Injured||2::Killed||3::Killed</td>
      <td>0::Victim||1::Victim||2::Victim||3::Subject-Su...</td>
      <td>http://myfox8.com/2013/01/08/update-mother-sho...</td>
      <td>62.0</td>
      <td>27.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 29 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Columns for the dataset</span>
<span class="n">columns1</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[28]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Index([&#39;incident_id&#39;, &#39;date&#39;, &#39;state&#39;, &#39;city_or_county&#39;, &#39;address&#39;, &#39;n_killed&#39;,
       &#39;n_injured&#39;, &#39;incident_url&#39;, &#39;source_url&#39;,
       &#39;incident_url_fields_missing&#39;, &#39;congressional_district&#39;, &#39;gun_stolen&#39;,
       &#39;gun_type&#39;, &#39;incident_characteristics&#39;, &#39;latitude&#39;,
       &#39;location_description&#39;, &#39;longitude&#39;, &#39;n_guns_involved&#39;, &#39;notes&#39;,
       &#39;participant_age&#39;, &#39;participant_age_group&#39;, &#39;participant_gender&#39;,
       &#39;participant_name&#39;, &#39;participant_relationship&#39;, &#39;participant_status&#39;,
       &#39;participant_type&#39;, &#39;sources&#39;, &#39;state_house_district&#39;,
       &#39;state_senate_district&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># data type of a dataset downloaded from kaggle.com</span>
<span class="n">datas</span><span class="o">.</span><span class="n">get_dtype_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[29]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>bool        1
float64     6
int64       3
object     19
dtype: int64
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># length of dataset from kaggle</span>
<span class="n">len_datas</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[30]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>239677
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># shape of the dataset, this shows numbers of rows and columns</span>
<span class="n">datas</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[31]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>(239677, 29)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># size of the dataset</span>
<span class="n">datas</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[32]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>6950633
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># it gives us brief information about the dataset</span>
<span class="n">datas</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>incident_id</th>
      <th>n_killed</th>
      <th>n_injured</th>
      <th>congressional_district</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>n_guns_involved</th>
      <th>state_house_district</th>
      <th>state_senate_district</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2.396770e+05</td>
      <td>239677.000000</td>
      <td>239677.000000</td>
      <td>227733.000000</td>
      <td>231754.000000</td>
      <td>231754.000000</td>
      <td>140226.000000</td>
      <td>200905.000000</td>
      <td>207342.00000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>5.593343e+05</td>
      <td>0.252290</td>
      <td>0.494007</td>
      <td>8.001265</td>
      <td>37.546598</td>
      <td>-89.338348</td>
      <td>1.372442</td>
      <td>55.447132</td>
      <td>20.47711</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.931287e+05</td>
      <td>0.521779</td>
      <td>0.729952</td>
      <td>8.480835</td>
      <td>5.130763</td>
      <td>14.359546</td>
      <td>4.678202</td>
      <td>42.048117</td>
      <td>14.20456</td>
    </tr>
    <tr>
      <th>min</th>
      <td>9.211400e+04</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>19.111400</td>
      <td>-171.429000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.00000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>3.085450e+05</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>33.903400</td>
      <td>-94.158725</td>
      <td>1.000000</td>
      <td>21.000000</td>
      <td>9.00000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>5.435870e+05</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>5.000000</td>
      <td>38.570600</td>
      <td>-86.249600</td>
      <td>1.000000</td>
      <td>47.000000</td>
      <td>19.00000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>8.172280e+05</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>10.000000</td>
      <td>41.437375</td>
      <td>-80.048625</td>
      <td>1.000000</td>
      <td>84.000000</td>
      <td>30.00000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.083472e+06</td>
      <td>50.000000</td>
      <td>53.000000</td>
      <td>53.000000</td>
      <td>71.336800</td>
      <td>97.433100</td>
      <td>400.000000</td>
      <td>901.000000</td>
      <td>94.00000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># information about dataset</span>
<span class="n">datas</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 239677 entries, 0 to 239676
Data columns (total 29 columns):
incident_id                    239677 non-null int64
date                           239677 non-null object
state                          239677 non-null object
city_or_county                 239677 non-null object
address                        223180 non-null object
n_killed                       239677 non-null int64
n_injured                      239677 non-null int64
incident_url                   239677 non-null object
source_url                     239209 non-null object
incident_url_fields_missing    239677 non-null bool
congressional_district         227733 non-null float64
gun_stolen                     140179 non-null object
gun_type                       140226 non-null object
incident_characteristics       239351 non-null object
latitude                       231754 non-null float64
location_description           42089 non-null object
longitude                      231754 non-null float64
n_guns_involved                140226 non-null float64
notes                          158660 non-null object
participant_age                147379 non-null object
participant_age_group          197558 non-null object
participant_gender             203315 non-null object
participant_name               117424 non-null object
participant_relationship       15774 non-null object
participant_status             212051 non-null object
participant_type               214814 non-null object
sources                        239068 non-null object
state_house_district           200905 non-null float64
state_senate_district          207342 non-null float64
dtypes: bool(1), float64(6), int64(3), object(19)
memory usage: 51.4+ MB
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#now we move from states and look at the cities with the highest</span>
<span class="c1">#gun violence in the United States. We can see that Chicago, Baltimore</span>
<span class="c1">#Washignton DC are the highest cities in gun violence.</span>
<span class="c1">#it is intresting that there are only two cities from</span>
<span class="c1">#the top four states, which are Chicagoand Houston.</span>
<span class="n">topcitywise_crime_rate</span> <span class="o">=</span> <span class="n">datas</span><span class="p">[</span><span class="s2">&quot;city_or_county&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">topcitywise_crime_rate_plot</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">topcitywise_crime_rate</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">topcitywise_crime_rate</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;cubehelix&#39;</span><span class="p">)</span>
<span class="n">topcitywise_crime_rate_plot</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">topcitywise_crime_rate_plot</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">75</span><span class="p">)</span>
<span class="n">topcitywise_crime_rate_plot</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Cities or Counties with highest number of Gun Violence&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[35]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>Text(0.5,1,&#39;Cities or Counties with highest number of Gun Violence&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_40_1.png" src="_images/projectfinal_40_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#here we show the map of the United States with the highest</span>
<span class="c1">#places (cities) with gun violence</span>
<span class="c1">#we see that it is mostly spread in the east, west cost</span>
<span class="c1">#and the south. With red points almost everywhere except</span>
<span class="c1">#the centre areas of the country.</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">conda</span>

<span class="n">conda_file_dir</span> <span class="o">=</span> <span class="n">conda</span><span class="o">.</span><span class="vm">__file__</span>
<span class="n">conda_dir</span> <span class="o">=</span> <span class="n">conda_file_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;lib&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">proj_lib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conda_dir</span><span class="p">,</span> <span class="s1">&#39;share&#39;</span><span class="p">),</span> <span class="s1">&#39;proj&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PROJ_LIB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">proj_lib</span>

<span class="kn">from</span> <span class="nn">mpl_toolkits.basemap</span> <span class="k">import</span> <span class="n">Basemap</span>

<span class="n">map1</span> <span class="o">=</span><span class="n">datas</span><span class="p">[</span><span class="n">datas</span><span class="p">[</span><span class="s2">&quot;latitude&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
<span class="n">map1</span> <span class="o">=</span> <span class="n">map1</span><span class="p">[[</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="s2">&quot;city_or_county&quot;</span><span class="p">]]</span>

<span class="n">m</span><span class="o">=</span><span class="n">Basemap</span><span class="p">(</span><span class="n">lat_0</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">lon_0</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;ortho&#39;</span> <span class="p">)</span>

<span class="n">lat</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="s2">&quot;latitude&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">lon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="s2">&quot;longitude&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">m</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">lat</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s2">&quot;go&quot;</span><span class="p">,</span><span class="n">markersize</span> <span class="o">=.</span><span class="mi">2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;RED&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawcountries</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawcoastlines</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">bluemarble</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;LOCATIONS WHICH REPRESENT GUN VIOLENCE&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="stderr output_area docutils container">
<div class="highlight"><pre>
Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_41_1.png" src="_images/projectfinal_41_1.png" />
</div>
</div>
<p>This map shows the number of incidents of gun violence in the state of
Iowa As we can see from the map there is more concentration of re dots
on the bigger cities with more population like Des Moines, Iowa city and
Cedar Rapids The same happens when we look at Illinois, there is a lot
of red dots around Chicago comparing to the rest of the state. This also
confirm the trend that we have been seeing of the big cities in the
states with th mopst incidents of gun violence</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.basemap</span> <span class="k">import</span> <span class="n">Basemap</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="p">)</span>
<span class="c1"># total attack(killed + injured)</span>
<span class="n">datas</span><span class="p">[</span><span class="s2">&quot;total_attack&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datas</span><span class="o">.</span><span class="n">n_killed</span> <span class="o">+</span> <span class="n">datas</span><span class="o">.</span><span class="n">n_injured</span>

<span class="n">Iowa</span> <span class="o">=</span> <span class="n">datas</span><span class="p">[</span><span class="n">datas</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="s2">&quot;Iowa&quot;</span><span class="p">]</span>

<span class="c1"># read in data to use for plotted points</span>

<span class="n">lat</span> <span class="o">=</span> <span class="n">Iowa</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">lon</span> <span class="o">=</span> <span class="n">Iowa</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># determine range to print based on min, max lat and lon of the data</span>
<span class="n">margin</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># buffer to add to the range</span>
<span class="n">lat_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span> <span class="o">-</span> <span class="n">margin</span>
<span class="n">lat_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span> <span class="o">+</span> <span class="n">margin</span>
<span class="n">lon_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span> <span class="o">-</span> <span class="n">margin</span>
<span class="n">lon_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span> <span class="o">+</span> <span class="n">margin</span>

<span class="c1"># create map using BASEMAP</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Basemap</span><span class="p">(</span><span class="n">llcrnrlon</span><span class="o">=</span><span class="n">lon_min</span><span class="p">,</span>
            <span class="n">llcrnrlat</span><span class="o">=</span><span class="n">lat_min</span><span class="p">,</span>
            <span class="n">urcrnrlon</span><span class="o">=</span><span class="n">lon_max</span><span class="p">,</span>
            <span class="n">urcrnrlat</span><span class="o">=</span><span class="n">lat_max</span><span class="p">,</span>
            <span class="n">lat_0</span><span class="o">=</span><span class="p">(</span><span class="n">lat_max</span> <span class="o">-</span> <span class="n">lat_min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">lon_0</span><span class="o">=</span><span class="p">(</span><span class="n">lon_max</span><span class="o">-</span><span class="n">lon_min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;merc&#39;</span><span class="p">,</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span>
            <span class="n">area_thresh</span><span class="o">=</span><span class="mf">1000000.</span><span class="p">,</span>
            <span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawcoastlines</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawcountries</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawstates</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">drawmapboundary</span><span class="p">(</span><span class="n">fill_color</span><span class="o">=</span><span class="s1">&#39;#46bcec&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">fillcontinents</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="n">lake_color</span><span class="o">=</span><span class="s1">&#39;#46bcec&#39;</span><span class="p">)</span>
<span class="c1"># convert lat and lon to map projection coordinates</span>
<span class="n">lons</span><span class="p">,</span> <span class="n">lats</span> <span class="o">=</span> <span class="n">m</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
<span class="c1"># plot points as red dots</span>
<span class="n">m</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_43_0.png" src="_images/projectfinal_43_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#here we plot gun violence incidents per year in the past 4 years</span>
<span class="c1">#we can see that the gun violence is increasing every year</span>
<span class="c1">#in the past 4 years to reach 61000 incidents in 2017.</span>
<span class="c1">#this year so far there was 13000 incidents, thsi counts only</span>
<span class="c1">#till March 31st 2018.</span>
<span class="n">datas</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datas</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>

<span class="n">datas</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">datas</span><span class="o">.</span><span class="n">date</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">year</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">datas</span><span class="o">.</span><span class="n">date</span><span class="p">))]</span>

<span class="n">f</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">year_count</span> <span class="o">=</span> <span class="n">datas</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">year_count</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="n">year_count</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">palette</span><span class="o">=</span><span class="s1">&#39;PRGn&#39;</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span><span class="o">+</span><span class="mf">0.3</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span><span class="o">+</span><span class="mi">1000</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;Blue&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Gun Violence per Year&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;Green&#39;</span><span class="p">)</span>
<span class="n">y_axis</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_47_0.png" src="_images/projectfinal_47_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#this plot shows the graph of number of people killed and</span>
<span class="c1">#with number of people injured seperately in the past 4 years</span>
<span class="c1">#there is increase  in both, but the number of people injuries is</span>
<span class="c1">#increasing more, we disregard the decrease in 2018 because it does not</span>
<span class="c1">#include data from the whole year.</span>
<span class="n">datas</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datas</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">datas</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">datas</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
<span class="n">df_year</span><span class="o">=</span><span class="n">datas</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">])[</span><span class="s1">&#39;n_killed&#39;</span><span class="p">,</span><span class="s1">&#39;n_injured&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="n">df_year</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[39]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a157706a0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_48_1.png" src="_images/projectfinal_48_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1">#here we show the correlations of our Kaggle dataset</span>
<span class="c1">#it shows taht there are some positive relationships</span>
<span class="c1">#between variables like state senate district and state</span>
<span class="c1">#house district.</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">datas</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;int64&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;ocean&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[40]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a242fcf60&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/projectfinal_49_1.png" src="_images/projectfinal_49_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Data Visualization Project  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Beka Beriashvili.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>